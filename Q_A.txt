Jul 14 2020


To change normalize parameters in GISIC, there are more parameters in spec.normalize() than batch.normalize(). 

For instance, 

in GISIC_C
  line 24:
	def normalize(wavelength, flux, sigma=30, k=3, s=6, cahk=False, band_check=True, flux_min=70, boost=True, return_points=False):

	this is used as spec.normalize()

in Interface/batch.py
   line 123:
     wave, norm, cont = GISIC.normalize(spec.get_frame_wave(), spec.get_frame_flux(), sigma = SIGMA, k=1)

    why k=1 ? here?


in GISIC_C spectrum.py 

   line 247 def spline_continuum(self, k=3, s=5.0):

Why are they (gisic and batch) differ? I do not see s variable in GISIC.normalize in batch.py


Further, I would like to set this normalization parameters s, k outside of GISIC or batch.py. Perhaps, I could set up them in main.py or some param file.

Ok, I realized that s=6 in GISIC_C normalize() does not change the normalization though parameters were changed. I need to put that back to s=12


Q : I’ve changed k=1 to k=3 in batch.normalize(). the cubic spline makes more curvature but it does not solve the normalization.
What I need to change is to fix pseudo-continuum. So I need to find where that is defined. 

I need to look at interface/GISIC_C/spectrum.py

— define_cont_points(), set_segment_midpoints(), set_segment_continnum()  and so on.



Q: how to change EW value for CH mode to CH+C2 mode 
 
   G77-61 does not do CH mode anymore.



To do list
1. GISIC.normalize() 
   flux_min = 70 —> 80


in batch.normalize() 
2.  for SIGMA in np.linspace(25, 35, 10):
    for SIGMA in np.linspace(15, 25, 10):

I can change k= in batch.normalize()


3. EW.set_CH_procedure()\
   
CH_EW >40 —< change this value to see if CH+C2 mode moves to CH mode